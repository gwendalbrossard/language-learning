model Organization {
  id       String  @id @default(cuid())
  name     String
  slug     String  @unique
  logo     String?
  metadata Json

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  members     Member[]
  invitations Invitation[]

  @@map("organization")
}

model Member {
  id   String     @id @default(cuid())
  role MemberRole @default(MEMBER)

  profileId String
  profile   Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)

  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("member")
}

enum MemberRole {
  MEMBER
  ADMIN

  @@map("member_role")
}

model Invitation {
  id    String @id @default(cuid())
  email String

  inviterId String
  inviter   Profile @relation(fields: [inviterId], references: [id], onDelete: Cascade)

  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)

  @@map("invitation")
}
